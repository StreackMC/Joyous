## 熵流抽卡
# 如果你了解米池说不定可以看的更懂

## 命令
# 游戏内没有命令帮助和补全。
# 默认命令是/entroprix， 可以在config.yml里面设置别名
# > /entroprix <player> guarantee [id] get
# > /entroprix <player> guarantee [id] set <tries|count> <value>
# > /entroprix <player> guarantee [id] reset
# > /entroprix <player> roll <poolName> [times]

## 卡池 (pool)
# 每个卡池有一个 标识符(poolName) ，每次使用命令 roll 时就会根据卡池配置来进行抽取。
# 例如示例中的 example 就是 poolName

## 保底 (guarantee)
# 保底是一个机制，指玩家必定会在多少发内获取指定类别奖励（比如A、B、C，可以为多个）
# 保底需要设置一个名称，同名称保底互通计数
# 
# 保底分为小的和大的，小保底内如果没中指定奖励（比如A,只能有一个，且必须为保底奖励），就会累计大保底计数
# 小保底触发 max - 1 次后的下个保底就会是大保底，必中指定奖励（上文的A）
# 无论通过何种方式获取指定类别奖励（A、B、C），都会重置保底抽数计数（every）
# 无论通过何种方式获取指定奖励（A），都会重置大保底计数（max）
# 换言之，玩家必定在每 every 发内获取指定类别奖励（A、B、C），必在 every*max 发内获取指定奖励（A）
# 
# 保底还有个概率提升机制
# (left) 定义剩余几抽开始提升概率，最小为 0
# 比如说保底需要 50 发，left 设置为 20，那么玩家在抽到保底内第 30 发开始提升保底奖励提升概率
# * 具体机制是将非指定奖励的概率平均加到指定奖励的概率里面，并在内部等比均摊
# * 而非保底奖励的概率则等比均摊
# 假设指定奖励概率是 10% ，很明显有 90% 的概率不出
# 第35发，剩余15发，满足提升概率条件
# 则指定奖励概率由 10% 变成 10% + (90% / 15 + 1) = 15.625%
# 假设非保底奖励是 D:50%，则变为 D: (100%-15.625%)*(50%/(100%-10%))
# 第49发，剩余1发，满足提升概率条件
# 则指定奖励概率由 10% 变成 10% + (90% / 1 + 1) = 55%
# 第50发，剩余0发，满足提升概率条件
# 则指定奖励概率由 10% 变成 10% + (90% / 0 + 1) = 100% （保底吃满必出）

guarantee:
  # 这里是保底名称
  baodi:
    # 保底所需最大抽数
    every: 50
    # 第几个保底是大保底
    # 需要连续触发 max - 1 次小保底才行
    max: 2
    # 剩余几抽开始提升概率
    left: 20
pools:
  # poolName
  example:
    guarantee: "baodi"
    rewards:
      # 每一项表示一个可能的奖励
      -
        # 此奖励的名字
        # 仅用于日志标识，实际执行你需要自行处理提示玩家
        name: "苹果"
        # 抽中此项的概率
        rate: 99
        commands:
          # 抽中后执行什么命令
          # [player] 可以插入玩家名
          # 支持 Placeholders
          - "/give [player] apple"
      -
        name: "稀有的苹果"
        rate: 1
        commands:
          - "/give [player] golden_apple"
        # 0或不存在此项表示不保底
        # 1表示小保底的指定奖励
        # 2表示大保底的指定奖励，也计入小保底
        # 如果不设置大保底则 max 项无效
        guarantee: 1
  example1:
    # 多池共用保底
    # 像刚才那种没大保底的池子就不会重置保底计数，会一直累加
    # 直到这类有大保底的池子重置
    guarantee: "baodi"
    rewards:
      -
        name: "钻石"
        # 概率会自动拉平，不用保持和为100之类的
        rate: 3000
        commands:
          - "/give [player] diamond"
      -
        name: "稀有的钻石"
        rate: 543
        commands:
          - "/give [player] diamond_block 1"
        # 大保底小保底可以任意搭配
        # 但不推荐只有大保底的搭配（不推荐，不是不能用）
        guarantee: 1
      -
        name: "Au999"
        rate: 100
        commands:
          - "/give [player] gold_ingot 1"
        # 大保底小保底可以任意搭配
        # 但不推荐只有大保底的搭配（不推荐，不是不能用）
        guarantee: 2